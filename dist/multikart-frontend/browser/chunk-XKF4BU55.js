import{Dc as n,Ec as y,Gc as c,I as u,L as l,O as s,Oc as b,_b as g,a as A,b as h,d as i}from"./chunk-FQQSMIRW.js";var p=class{constructor(t){this.payload=t}static{this.type="[Attribute] Get"}},m=class{constructor(t){this.payload=t}static{this.type="[Attribute] Value Get"}},d=class{constructor(t){this.id=t}static{this.type="[Attribute] Edit"}};var f=class o{constructor(t){this.http=t;this.skeletonLoader=!1;this.offCanvasMenu=!1}getAttributes(t){return this.http.get(`${b.URL}/attribute.json`,{params:t})}getAttributeValues(t){return this.http.get(`${b.URL}/attribute-value.json`,{params:t})}getAttribute(t){return this.http.get(`${b.URL}/attribute/${t}`)}static{this.\u0275fac=function(a){return new(a||o)(s(g))}}static{this.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})}};var r=class{constructor(t){this.attributeService=t}static attribute(t){return t.attribute}static attribute_value(t){return a=>a?t?.attribute_values.filter(e=>+e.attribute_id===a)?.map(e=>({label:e?.value,value:e?.id})):[]}static selectedAttribute(t){return t.selectedAttribute}getAttributes(t,a){return this.attributeService.skeletonLoader=!0,this.attributeService.getAttributes(a.payload).pipe(u({next:e=>{t.patchState({attribute:{data:e.data,total:e?.total?e?.total:e.data.length}})},complete:()=>{this.attributeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getAttributeValues(t,a){return this.attributeService.getAttributeValues(a.payload).pipe(u({next:e=>{let v=t.getState();t.patchState(h(A({},v),{attribute_values:e.data}))},error:e=>{throw new Error(e?.error?.message)}}))}get(t,{id:a}){return this.attributeService.getAttributes().pipe(u({next:e=>{if(e&&e.data){let v=t.getState(),M=e.data.find(x=>x.id==a);t.patchState(h(A({},v),{selectedAttribute:M}))}},error:e=>{throw new Error(e?.error?.message)}}))}};r.\u0275fac=function(a){return new(a||r)(s(f))},r.\u0275prov=l({token:r,factory:r.\u0275fac}),i([n(p)],r.prototype,"getAttributes",1),i([n(m)],r.prototype,"getAttributeValues",1),i([n(d)],r.prototype,"get",1),i([c()],r,"attribute",1),i([c()],r,"attribute_value",1),i([c()],r,"selectedAttribute",1),r=i([y({name:"attribute",defaults:{attribute:{data:[],total:0},attribute_values:[],selectedAttribute:null}})],r);export{f as a,p as b,d as c,r as d};
