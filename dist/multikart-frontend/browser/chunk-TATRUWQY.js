import{a as S,g as Q,h as B,i as W,j as D,k as K,l as $,m as A,n as X,o as z,p as N}from"./chunk-KSHMD2WJ.js";import{M as T,N as H,O as E,P as V,k as G}from"./chunk-5SWUA4XY.js";import{u as M}from"./chunk-2XK34U63.js";import{Bc as w,Dc as s,Ec as f,Gc as u,I as v,Kd as O,L as c,O as a,Oc as x,_b as h,a as F,b as q,d as r,qc as g}from"./chunk-FQQSMIRW.js";var J=class n{constructor(t,e,o,d){this.store=t;this.router=e;this.modal=o;this.authService=d}canActivate(t,e){let o;return this.authService.redirectUrl=e.url,this.store.selectSnapshot(d=>d.auth&&d.auth.access_token)?o=!0:(this.authService.isLogin=!0,o=!1),this.store.dispatch(new S).subscribe({complete:()=>!0}),o}canActivateChild(t,e){return this.store.selectSnapshot(o=>o.auth&&o.auth.access_token)?((this.router.url.startsWith("/account")||this.router.url=="/checkout"||this.router.url=="/compare")&&this.router.navigate(["/"]),!1):!0}static{this.\u0275fac=function(e){return new(e||n)(a(w),a(g),a(O),a(M))}}static{this.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}};var i=class{constructor(t,e,o){this.store=t;this.router=e;this.authService=o}static accessToken(t){return t.access_token}static isAuthenticated(t){return!!t.access_token}static email(t){return t.email}static number(t){return t.number}static token(t){return t.token}register(t,e){}login(t,e){t.patchState({email:"john.customer@example.com",token:"",access_token:"115|laravel_sanctum_mp1jyyMyKeE4qVsD1bKrnSycnmInkFXXIrxKv49w49d2a2c5"}),this.store.dispatch(new S)}loginWithNumber(t,e){this.store.dispatch(new S)}forgotPassword(t,e){}verifyEmail(t,e){}verifyNumber(t,e){this.store.dispatch(new S)}updatePassword(t,e){}logout(t){this.store.dispatch(new N),this.router.navigate(["/"])}authClear(t){t.patchState({email:"",token:"",access_token:null,permissions:[]}),this.authService.redirectUrl=void 0,this.store.dispatch(new Q),this.store.dispatch(new G)}};i.\u0275fac=function(e){return new(e||i)(a(w),a(g),a(M))},i.\u0275prov=c({token:i,factory:i.\u0275fac}),r([s(B)],i.prototype,"register",1),r([s(W)],i.prototype,"login",1),r([s(D)],i.prototype,"loginWithNumber",1),r([s(K)],i.prototype,"forgotPassword",1),r([s($)],i.prototype,"verifyEmail",1),r([s(A)],i.prototype,"verifyNumber",1),r([s(X)],i.prototype,"updatePassword",1),r([s(z)],i.prototype,"logout",1),r([s(N)],i.prototype,"authClear",1),r([u()],i,"accessToken",1),r([u()],i,"isAuthenticated",1),r([u()],i,"email",1),r([u()],i,"number",1),r([u()],i,"token",1),i=r([f({name:"auth",defaults:{email:"",token:"",number:null,access_token:"",permissions:[]}})],i);var C=class{constructor(t){this.payload=t}static{this.type="[Store] Get"}},j=class{constructor(t){this.slug=t}static{this.type="[Store] Get By Slug"}};var k=class{constructor(t){this.payload=t}static{this.type="[Review] Get"}},R=class{constructor(t){this.payload=t}static{this.type="[Review] Post"}},P=class{constructor(t,e){this.id=t;this.payload=e}static{this.type="[Review] Put"}};var I=class n{constructor(t){this.http=t}getReview(t){return this.http.get(`${x.URL}/review.json`,{params:t})}static{this.\u0275fac=function(e){return new(e||n)(a(h))}}static{this.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}};var m=class{constructor(t){this.reviewsService=t}static review(t){return t.review}getReview(t,e){return this.reviewsService.getReview(e.payload).pipe(v({next:o=>{let d=o.data.filter(y=>y.product_id==e.payload.product_id);t.patchState({review:{data:d,total:d?.length}})},error:o=>{throw new Error(o?.error?.message)}}))}sendReview(t,e){}update(t,{payload:e,id:o}){}};m.\u0275fac=function(e){return new(e||m)(a(I))},m.\u0275prov=c({token:m,factory:m.\u0275fac}),r([s(k)],m.prototype,"getReview",1),r([s(R)],m.prototype,"sendReview",1),r([s(P)],m.prototype,"update",1),r([u()],m,"review",1),m=r([f({name:"review",defaults:{review:{data:[],total:0}}})],m);var L=class n{constructor(t){this.http=t;this.skeletonLoader=!1}getQuestionAnswers(t){return this.http.get(`${x.URL}/question-and-answer.json`,{params:t})}static{this.\u0275fac=function(e){return new(e||n)(a(h))}}static{this.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}};var l=class{constructor(t){this.questionsAnswersService=t}static questionsAnswers(t){return t.question}getQuestionAnswers(t,e){return this.questionsAnswersService.skeletonLoader=!0,this.questionsAnswersService.getQuestionAnswers(e.slug).pipe(v({next:o=>{let d=o.data.filter(y=>y.product_id==e.slug.product_id);t.patchState({question:{data:d,total:d?.length}})},complete:()=>{this.questionsAnswersService.skeletonLoader=!1},error:o=>{throw new Error(o?.error?.message)}}))}sendQuestion(t,e){}update(t,{payload:e,id:o}){}Feedback(t,e){}};l.\u0275fac=function(e){return new(e||l)(a(L))},l.\u0275prov=c({token:l,factory:l.\u0275fac}),r([s(T)],l.prototype,"getQuestionAnswers",1),r([s(H)],l.prototype,"sendQuestion",1),r([s(E)],l.prototype,"update",1),r([s(V)],l.prototype,"Feedback",1),r([u()],l,"questionsAnswers",1),l=r([f({name:"question",defaults:{question:{data:[],total:0}}})],l);var U=class n{constructor(t){this.http=t;this.skeletonLoader=!1}getStores(t){return this.http.get(`${x.URL}/store.json`,{params:t})}static{this.\u0275fac=function(e){return new(e||n)(a(h))}}static{this.\u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})}};var p=class{constructor(t,e){this.storeService=t;this.router=e}static store(t){return t.store}static selectedStore(t){return t.selectedStore}getStores(t,e){return this.storeService.skeletonLoader=!0,this.storeService.getStores(e.payload).pipe(v({next:o=>{t.patchState({store:{data:o.data,total:o?.total?o?.total:o.data?.length}})},complete:()=>{this.storeService.skeletonLoader=!1},error:o=>{throw new Error(o?.error?.message)}}))}getStoreBySlug(t,{slug:e}){return this.storeService.getStores().pipe(v({next:o=>{if(o&&o.data){let d=t.getState(),y=o.data.find(_=>_.slug==e);t.patchState(q(F({},d),{selectedStore:y}))}},error:o=>{throw this.router.navigate(["/404"]),new Error(o?.error?.message)}}))}};p.\u0275fac=function(e){return new(e||p)(a(U),a(g))},p.\u0275prov=c({token:p,factory:p.\u0275fac}),r([s(C)],p.prototype,"getStores",1),r([s(j)],p.prototype,"getStoreBySlug",1),r([u()],p,"store",1),r([u()],p,"selectedStore",1),p=r([f({name:"store",defaults:{store:{data:[],total:0},selectedStore:null}})],p);export{i as a,J as b,C as c,j as d,k as e,R as f,P as g,m as h,L as i,l as j,U as k,p as l};
